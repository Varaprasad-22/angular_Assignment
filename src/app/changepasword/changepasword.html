
<div class="change-password-card">
  <h2>Change Password</h2>

  <form [formGroup]="changePasswordForm" (ngSubmit)="submit()">

    <div class="form-group">
      <label>Old Password</label>
      <input type="password" formControlName="oldPassword" />
    </div>

    <div class="form-group">
      <label>New Password</label>
      <input type="password" formControlName="newPassword" />
    </div>

    <div class="password-rules"
      *ngIf="changePasswordForm.get('newPassword')?.touched">
      <p [class.valid]="changePasswordForm.get('newPassword')?.value?.length >= 8">
        • Minimum 8 characters
      </p>
      <p [class.valid]="/[A-Z]/.test(changePasswordForm.get('newPassword')?.value)">
        • One uppercase letter
      </p>
      <p [class.valid]="/[a-z]/.test(changePasswordForm.get('newPassword')?.value)">
        • One lowercase letter
      </p>
      <p [class.valid]="/\d/.test(changePasswordForm.get('newPassword')?.value)">
        • One number
      </p>
      <p [class.valid]="/[@$!%*?&]/.test(changePasswordForm.get('newPassword')?.value)">
        • One special character
      </p>
    </div>

    <div class="form-group">
      <label>Confirm New Password</label>
      <input type="password" formControlName="confirmPassword" />
      <small class="error"
        *ngIf="changePasswordForm.hasError('passwordMismatch') &&
               changePasswordForm.get('confirmPassword')?.touched">
        Passwords do not match
      </small>
    </div>
<small *ngIf="changePasswordForm.errors?.['passwordMismatch'] 
              && changePasswordForm.touched" style=" color: #b00020;">
  New password and confirm password do not match
</small>

<small *ngIf="changePasswordForm.errors?.['sameAsOldPassword'] 
              && changePasswordForm.touched" style=" color: #b00020;">
  New password must be different from old password
</small>
    <button type="submit" [disabled]="changePasswordForm.invalid">
      Change Password
    </button>

    <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
    <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>

  </form>
</div>
